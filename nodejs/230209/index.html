<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://cdn.socket.io/4.6.0/socket.io.min.js"
      integrity="sha384-c79GN5VsunZvi+Q/WObgk2in0CbZsHnjEqvFxC5DxHn9lTfNce2WW6h2pH6u/kF+"
      crossorigin="anonymous"
    ></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script>
    <title>Socket</title>
    <style>
      .chat {
        width: 300px;
        height: 500px;
        background-color: rgb(249, 105, 105);
      }
      .me {
        width: auto;
        height: auto;
        background-color: white;
        text-align: center;
        padding: 5px 0px;
        border-radius: 5%;
        float: right;
        display: block;
        margin: 10px 10px 0 0;
        padding: 5px 10px;
        clear: both;
      }
      .you {
        clear: both;
        padding: 10px 0 0 10px;
      }
      .you_msg {
        width: auto;
        height: auto;
        background-color: white;
        text-align: center;
        padding: 5px 10px;
        border-radius: 5%;
        display: inline-block;
      }
      .input_msg {
        width: 300px;
      }
      .btn {
        outline-color: rgb(249, 105, 105);
      }
      .btn:hover {
        background-color: rgb(249, 105, 105);
      }
    </style>
  </head>
  <body>
    <!-- 채팅 영역 -->
    <div id="chat" class="chat">
      <!-- 채팅 접속 알림
      <div></div> -->
      <div class="me">안녕</div>
      <div class="you">
        <div class="you_msg">반가워</div>
      </div>
    </div>
    <!-- 메세지 전송 영역 -->
    <div class="input-group input_msg">
      <input
        id="msg"
        type="text"
        class="form-control"
        placeholder="메세지를 입력하세요."
        aria-describedby="button-addon2"
      />
      <button
        id="sendBtn"
        class="btn btn btn-outline-danger rounded-0"
        type="button"
        id="button-addon2"
        onclick="send()"
      >
        전송
      </button>
    </div>
    <script>
      // 소켓 연결
      let socket = io.connect();
      socket.on("connect", () => console.log("server connected"));

      //enter 클릭 시, 메세지 전송
      var inputCk = document.getElementById("msg");
      inputCk.addEventListener("keyup", (e) => {
        if (e.keyCode === 13) {
          e.preventDefault();
          document.getElementById("sendBtn").click();
        }
      });

      //button 클릭 시, 이벤트
      const send = () => {
        var message = document.getElementById("msg").value;
        var chat = document.getElementById("chat");
        var msg = document.createElement("div");
        var node = document.createTextNode(message);
        msg.classList.add("me");
        msg.appendChild(node);
        chat.appendChild(msg);
        document.getElementById("msg").value = "";
      };
    </script>
  </body>
</html>
